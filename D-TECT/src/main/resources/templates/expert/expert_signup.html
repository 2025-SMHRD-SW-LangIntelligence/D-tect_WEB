<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>D-tect | 전문가 회원가입</title>
<!-- CSS -->
<link rel="stylesheet" th:href="@{/css/expert/expert_signup.css}" />
<meta th:name="_csrf" th:content="${_csrf.token}" />
<meta th:name="_csrf_header" th:content="${_csrf.headerName}" />

</head>

<body class="signup-page">
	<main class="stage">
		<!-- 좌상단 로고 (로그인으로 이동) -->
		<a id="logoLink" class="logo-wrap" href="#"> <img
			th:src="@{/images/logo.png}" alt="D-tect" class="logo-lg" />
		</a>

		<!-- 폼 카드 -->
		<section class="form-card" aria-labelledby="signupTitle">
			<h1 id="signupTitle" class="sr-only">전문가 회원가입</h1>

			<form id="signupForm" class="vform" novalidate>
				<!-- 이름 -->
				<div class="field">
					<span class="dot" aria-hidden="true"></span> <label for="name"
						class="label">이름</label> <input id="name" type="text" required />
				</div>

				<!-- 아이디 -->
				<div class="field">
					<span class="dot" aria-hidden="true"></span> <label for="username"
						class="label">아이디</label>
					<div class="input-row">
						<input id="username" type="text" required />
						<button class="mini-btn" type="button" id="checkIdBtn">아이디
							중복확인</button>
					</div>
				</div>

				<!-- 비밀번호 -->
				<div class="field">
					<span class="dot" aria-hidden="true"></span> <label for="password"
						class="label">패스워드</label> <input id="password" type="password"
						minlength="8" required placeholder="영문/숫자 8자 이상" />
				</div>

				<!-- 비밀번호 확인 -->
				<div class="field">
					<span class="dot" aria-hidden="true"></span> <label for="password2"
						class="label">패스워드확인</label> <input id="password2"
						name="password2" type="password" placeholder="비밀번호를 다시 입력하세요"
						required minlength="8" /> <span id="pwdMsg" class="msg"
						aria-live="polite"></span>
				</div>

				<!-- 이메일 -->
				<div class="field">
					<span class="dot" aria-hidden="true"></span> <label for="email"
						class="label">이메일</label>
					<div class="input-row">
						<input id="email" type="email" required
							placeholder="name@example.com" />
						<button class="mini-btn" type="button" id="verifyEmailBtn">이메일
							인증</button>
					</div>
				</div>

				<!-- 이메일 인증번호 입력 -->
				<div class="field" id="emailCodeRow" style="display: none">
					<span class="dot" aria-hidden="true"></span>
					<label for="emailCode" class="label">인증번호</label>
					<div class="input-row">
						<input id="emailCode" name="emailCode" type="text"
							placeholder="메일로 받은 인증번호 입력" />
						<button type="button" class="mini-btn" id="btnVerifyEmail">인증
							확인</button>
					</div>
					<span id="emailMsg" class="msg" aria-live="polite"></span>
				</div>

				<!-- 전화번호 -->
				<div class="field">
					<span class="dot" aria-hidden="true"></span> <label for="phone"
						class="label">전화번호</label> <input id="phone" type="tel" required
						placeholder="하이픈(-) 없이 입력해주세요" />
				</div>
				
				<!-- 주소 -->
				<div class="field">
					<span class="dot" aria-hidden="true"></span> <label
						for="officeAddress" class="label">주소</label>
					<div class="input-row">
						<input id="officeAddress" type="text" required
							placeholder="기본 주소를 입력하세요" />
						<button class="mini-btn" type="button" id="addrBtn">주소 찾기</button>
					</div>
				</div>
                
                <!-- 상세주소 -->
                <div class="field">
                    <span class="dot" aria-hidden="true"></span>
                    <label for="addr2" class="label">상세주소</label>
                    <input id="addr2" type="text" placeholder="상세주소를 입력해주세요." />
                </div>



				<!-- 전문분야 -->
				<div class="field field--top">
					<span class="dot" aria-hidden="true"></span> <label class="label">전문분야</label>
					<div class="chips" id="specialtyChips" role="group"
						aria-label="전문분야 선택">
						<!-- JS에서 칩 생성 -->
					</div>
				</div>

				<!-- 자격증명서 -->
				<div class="field">
					<span class="dot" aria-hidden="true"></span> <label for="certFile"
						class="label">자격증명서</label>
					<div class="input-row">
						<input id="certFileName" class="file-name" type="text"
							placeholder="자격증명서를 첨부해주세요" readonly /> <input id="certFile"
							type="file" accept=".pdf,.jpg,.jpeg,.png" hidden />
						<button class="mini-btn" type="button" id="fileBtn">찾아보기</button>
					</div>
				</div>

				<div class="actions right">
					<button class="btn btn--primary" type="submit">회원가입</button>
				</div>
			</form>
		</section>
	</main>
	<!-- JS -->
	<script
		src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
	<script defer type="module" th:src="@{/js/expert/expert_signup.js}"></script>
	<script>
  // expert_signup 화면에서만 실행
  document.addEventListener('DOMContentLoaded', function normalizeValidationMessages(){
    document.querySelectorAll('.signup-page .form-card .vform .field').forEach(field => {
      // field 안에서 '라벨/점/인풋'이 아닌 알 수 없는 요소 = 메시지로 간주
      field.querySelectorAll(':scope > *').forEach(el => {
        if (el.matches('.dot,.label,input,textarea,select,.input-row,.chips,.chip')) return;
        el.classList.add('error-msg');            // CSS 패치의 셀렉터에 걸리도록
        el.style.gridColumn = '2 / -1';           // 방어적으로 한번 더 고정
      });
    });
  });
</script>
	

</body>

</html>