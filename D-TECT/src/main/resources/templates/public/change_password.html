<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>D-tect | 비밀번호 변경</title>
    <link rel="stylesheet" th:href="@{/css/public/change_password.css}" />
</head>

<body>
    <!-- 좌상단 로고(200px) -->
    <a href="/" class="logo" aria-label="D-tect 홈으로">
        <img th:src="@{/images/logo.png}" alt="D-tect 로고">
    </a>

    <main class="wrap">
        <section class="card" aria-label="비밀번호 변경">
            <form id="verifyForm" novalidate>
                <div class="row">
                    <label for="name">이름</label>
                    <input id="name" name="name" type="text" placeholder="이름을 입력하세요" required>
                </div>

                <div class="row">
                    <label for="userid">아이디</label>
                    <input id="userid" name="userid" type="text" placeholder="아이디를 입력하세요" required>
                </div>

                <div class="row">
                    <label for="email">이메일</label>
                    <div class="inline">
                        <input id="email" name="email" type="email" placeholder="example@domain.com" required>
                        <button type="button" class="chip" id="btnEmail">이메일 인증</button>
                    </div>
                </div>
                
                <!-- 이메일 인증번호 입력 -->
                <div class="row" id="emailCodeRow" style="display:none">
                	<span class="dot" aria-hidden="true"></span>
				    <label for="emailCode">인증번호</label>
				    <div class="inline">
				    	<input id="emailCode" name="emailCode" type="text" placeholder="메일로 받은 인증번호 입력" />
				    	<button type="button" class="chip" id="btnVerifyEmail">인증 확인</button>
				    </div>
				    <span id="emailMsg" class="msg" aria-live="polite"></span>
				</div>

                <div class="row">
                    <label for="phone">전화번호</label>
                    <input id="phone" name="phone" type="tel" inputmode="numeric" placeholder="하이픈(-) 없이 입력해주세요"
                        maxlength="11" pattern="^[0-9]{10,11}$" title="숫자 10~11자리(하이픈 없이)만 입력해주세요." required>
                </div>

                <button id="btnOpenModal" class="btn" type="submit">변경하기</button>
            </form>
        </section>
    </main>

    <!-- 새 비밀번호 모달 -->
    <div class="modal-backdrop" id="pwModal" aria-hidden="true">
        <div class="modal" role="dialog" aria-modal="true" aria-labelledby="pwTitle">
            <h2 id="pwTitle">새 비밀번호 설정</h2>

            <div class="mrow">
                <label for="newPwd">새 비밀번호</label>
                <div class="pwbox">
                    <input id="newPwd" type="password" placeholder="영문/숫자/특수문자 8자 이상" minlength="8" required>
                    <button type="button" class="eye" id="toggle1" aria-label="비밀번호 표시/숨기기">👁️</button>
                </div>
                <div id="meter" class="meter" aria-live="polite"></div>
            </div>

            <div class="mrow">
                <label for="newPwd2">비밀번호 확인</label>
                <div class="pwbox">
                    <input id="newPwd2" type="password" placeholder="다시 입력" minlength="8" required>
                    <button type="button" class="eye" id="toggle2" aria-label="비밀번호 표시/숨기기">👁️</button>
                </div>
                <div id="matchMsg" class="match" aria-live="polite"></div>
            </div>

            <div class="mactions">
                <button id="confirmChange" class="btn solid" type="button">확인</button>
                <button id="cancelChange" class="btn ghost" type="button">취소</button>
            </div>
        </div>
    </div>

    <script type = "module" th:src="@{/js/public/change_password.js}"></script>
</body>

</html>