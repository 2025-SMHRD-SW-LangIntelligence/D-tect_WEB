:root{
    --bg:#222; --panel:#2f2f2f; --paper:#fff; --brand:#ffd400; --ink:#111;
    --muted:#9a9a9a; --line:#3a3a3a; --radius:14px; --shadow:0 8px 24px rgba(0,0,0,.18);
}

*{ box-sizing:border-box }
html,body{ height:100% }

body.chat-page{
    margin:0; background:#1f1f1f; color:#fff;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Pretendard,"Apple SD Gothic Neo",Arial,Helvetica,sans-serif;
}

.wrap{
    max-width:1100px; margin:20px auto; padding:0 14px;
    display:grid; gap:12px; grid-template-columns:2fr 1fr;
}
.pane{
    background:#2b2b2b; border-radius:16px; border:1px solid var(--line); box-shadow:var(--shadow); overflow:hidden;
}
.pane__head{ padding:10px 12px; border-bottom:1px solid var(--line); background:#262626 }

.status{ display:flex; align-items:center; gap:10px; color:#cfcfcf }
.mini{ height:30px; padding:0 10px; border:none; border-radius:999px; cursor:pointer; font-weight:800; background:#efefef; color:#111 }

.pane--messages{ min-height:520px }
.messages{
    height:420px; overflow:auto; padding:12px; background:#202020;
    border-left:4px solid #59a3ff; border-right:4px solid #202020;
}
.jump{
    position:absolute; right:24px; bottom:110px;
    background:#111; color:#fff; border:none; border-radius:999px;
    padding:8px 12px; cursor:pointer; box-shadow:var(--shadow);
}

.composer{
    display:grid; grid-template-columns:1fr 88px; gap:10px;
    padding:12px; background:#2b2b2b; border-top:1px solid var(--line);
}
#composer{
    width:100%; resize:vertical; min-height:64px; max-height:160px;
    border-radius:12px; border:2px solid var(--brand);
    background:#fff; color:#111; padding:10px 12px;
}
.send{ border:none; border-radius:14px; background:var(--brand); color:var(--ink); font-weight:900; cursor:pointer }

.pane--files{ position:relative }
.files__head{
    background:var(--brand); color:var(--ink); font-weight:900;
    padding:8px 12px; display:flex; align-items:center; justify-content:space-between;
}

.files{
    list-style:none; margin:0; padding:10px 12px;
    height:520px; overflow-y:auto; overflow-x:hidden; background:#2b2b2b;
}
.files li{ margin:0; padding:0; border:0 }

.files li.file-row{
    display:flex; align-items:center; gap:12px;
    background:#242424; padding:14px 16px; border-radius:14px;
    border:1px solid var(--line); color:#eaeaea; margin-bottom:12px; width:100%;
}

.role-badge{
    flex:0 0 auto; white-space:nowrap;
    padding:8px 12px; border-radius:999px; font-weight:900; font-size:.95rem;
}
.role-badge.role--user   { background:#ffe8a3; color:#262626 }
.role-badge.role--expert { background:#a3d4ff; color:#0f2a45 }
.role-badge.role--neutral{
    background:#444; color:#eee;
    font-size:.85rem; padding:6px 10px;
}

.ftext{
    flex:1 1 auto; min-width:0;
    display:flex; flex-direction:column; gap:6px;
}
.fname{ font-weight:900; line-height:1.38; white-space:normal; overflow-wrap:anywhere; word-break:break-word; }
.ftime{ color:#bdbdbd; font-size:.95rem; white-space:nowrap; }

.dl-btn{
    flex:0 0 auto; margin-left:auto;
    display:inline-flex; align-items:center; justify-content:center;
    width:40px; height:40px; padding:0;
    background:#ffd400; color:#111; text-decoration:none; font-weight:900;
    border-radius:12px; box-shadow:0 2px 0 #cda600;
}
.dl-btn:hover  { transform:translateY(-1px) }
.dl-btn:active { transform:translateY(1px); box-shadow:none }
.dl-btn svg{ width:18px; height:18px; display:block }

.msg{ max-width:72%; padding:10px 12px; border-radius:14px; margin:8px 0; position:relative; word-break:break-word }
.msg .meta{ display:flex; align-items:center; gap:8px; margin-bottom:8px; color:#cfcfcf; font-size:.9rem }
.msg .body{ white-space:pre-wrap; background:#fff; color:#111; padding:10px; border-radius:10px }

.row{ display:flex }
.row.me{ justify-content:flex-end }
.row.me .msg{ background:#1b1b1b }
.row.me .body{ background:#ffd400; color:#111 }
.row.other .msg{ background:#242424 }
.row.other .body{ background:#fff; color:#111 }

.time{ color:#a7a7a7; font-size:.82rem }
.badge{ font-size:.82rem; padding:2px 8px; border-radius:999px; background:#3d3d3d; color:#ddd }

.file-bubble{
    display:flex; align-items:center; gap:12px;
    text-decoration:none; font-weight:900;
    padding:14px 16px; border-radius:12px;
}
.row.me   .file-bubble{ background:#ffd400; color:#111 }
.row.other .file-bubble{ background:#fff;    color:#111 }

.file-bubble .file-ico svg{ width:20px; height:20px; display:block }

.dl-round{
    display:inline-flex; align-items:center; justify-content:center;
    width:44px; height:44px; margin-top:8px;
    border-radius:14px; text-decoration:none;
    background:#ffd400; color:#111; box-shadow:0 2px 0 #cda600;
}
.row.other .dl-round{ background:#efefef; color:#111; box-shadow:none }
.dl-round svg{ width:18px; height:18px; }

.msg{ position:relative }
.del-btn{
    position:absolute; top:-6px; right:-6px;
    width:22px; height:22px; line-height:22px; border:none; border-radius:999px;
    background:#ff6b6b; color:#fff; font-weight:900; cursor:pointer; opacity:0; transition:opacity .15s;
}
.row.me .del-btn{ background:#ff7070 }
.row.other .del-btn{ background:#6b6b6b }
.msg:hover .del-btn{ opacity:1 }
@media (pointer:coarse){ .del-btn{ opacity:1 } }

@media (max-width:900px){
    .wrap{ grid-template-columns:1fr }
    .messages{ height:58vh }
    .files{ height:auto; max-height:260px }
}
@media (max-width:560px){
    .dl-btn{ width:36px; height:36px }
    .dl-btn svg{ width:16px; height:16px }
}
